<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MeAI | index</title>
<link rel="icon" href="data:,">
<style>
  :root{ --glass: rgba(255,255,255,.04); --glass-b: rgba(255,255,255,.16); --blue:#60a5fa; --ok:#5be37e; }
  html,body{height:100%}
  body{
    margin:0;
    font-family:"Noto Sans JP",system-ui,-apple-system,Segoe UI,Roboto,"Hiragino Kaku Gothic ProN","Yu Gothic",sans-serif;
    color:#fff;
    background:#000 url("public/space_background.png") center/cover fixed no-repeat;
    overflow:hidden;
  }
  .hidden{display:none!important;}
  .wrap{position:relative;z-index:20;max-width:960px;margin:0 auto;padding:18px;}
  .stage{position:fixed;inset:0;z-index:5;}
  .stars,.stars::after{position:absolute;inset:0;content:"";background:radial-gradient(white 1px,transparent 1px) 0 0/3px 3px;opacity:.22;animation:twinkle 10s linear infinite;}
  .stars::after{animation-duration:15s;opacity:.15;filter:blur(.6px) brightness(1.2);}
  @keyframes twinkle{0%{transform:translateY(0)}100%{transform:translateY(-3px)}}
  .card{background:var(--glass);border:1px solid var(--glass-b);border-radius:20px;padding:14px 16px;backdrop-filter:blur(6px);}
  .btn{display:inline-flex;align-items:center;gap:.5em;border:none;border-radius:999px;padding:10px 16px;cursor:pointer;color:#fff;background:var(--blue);font-weight:700;}
  .btn-ghost{background:transparent;border:1px solid var(--glass-b);}
  .btn[disabled]{opacity:.5;cursor:not-allowed;}
  .pill{display:inline-flex;align-items:center;gap:.5em;padding:6px 10px;border-radius:999px;background:var(--glass);border:1px solid var(--glass-b);}
  select{background:transparent;color:#fff;border:1px solid var(--glass-b);border-radius:10px;padding:6px 10px;}

  /* Pet */
  #pet{position:absolute;z-index:40;width:140px;height:140px;transform-origin:50% 60%;filter:drop-shadow(0 10px 24px rgba(0,0,0,.5));animation:yurayura 3.4s ease-in-out infinite;pointer-events:none;}
  @keyframes yurayura{0%,100%{transform:translate(-50%,-50%) rotate(-3deg)}50%{transform:translate(-50%,-52%) rotate(3deg)}}
  #pet img{width:100%;height:100%;object-fit:contain;}

  /* Cover (AKO) */
  .cover{position:fixed;inset:0;display:grid;place-items:center;z-index:100;background:#000;}
  .cover-inner{text-align:center;max-width:720px;}
  .logo{font-size:2.4rem;font-weight:900;}
  .nameRow{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin:12px 0;}
  .input{padding:10px 12px;border-radius:12px;border:1px solid var(--glass-b);background:#111;color:#fff;min-width:220px;}

</style>
</head>
<body>
<div class="stage">
  <div class="stars"></div>
  <div id="pet"><img id="petImg" src="public/char/blue/calm.png" alt="pet"></div>
</div>

<div class="wrap">
  <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px;">
    <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
      <div class="pill" id="helloPill">👋 ようこそ</div>
      <select id="langSelect">
        <option value="ja">日本語</option>
        <option value="en">English</option>
        <option value="ko">한국어</option>
        <option value="zh">中文</option>
      </select>
    </div>
    <div style="display:flex;gap:8px;align-items:center;">
      <div class="pill">❤️ <span id="hearts">0</span></div>
      <div class="pill">♪ <span id="notes">0</span></div>
    </div>
  </div>

  <div class="card">
    <h2>お世話コーナー</h2>
    <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:8px;">
      <button class="btn" onclick="goRoom('feed')">🍙 ご飯をあげる</button>
      <button class="btn" onclick="goRoom('water')">💧 お水をあげる</button>
      <button class="btn" onclick="goRoom('pet')">🤲 なでる</button>
      <button class="btn" onclick="goRoom('clean')">🧹 お片づけ</button>
    </div>
  </div>
</div>

<!-- 表紙（アコ） -->
<div class="cover" id="cover">
  <div class="cover-inner card" style="background:#0b0b0b;border:1px solid var(--glass-b);">
    <img src="public/char/ako2.png" alt="AKO" style="width:min(280px,60vw);height:auto;border-radius:30px;margin:6px auto 10px;display:block;filter:drop-shadow(0 20px 40px rgba(0,0,0,.45));">
    <div class="logo">アコ / AKO</div>
    <p>小さな“やってみる”を、やさしく提案してくれる相棒。</p>
    <div class="nameRow">
      <input id="youName" class="input" placeholder="あなたの名前（例：みわ）">
      <button id="startBtn" class="btn">はじめる</button>
    </div>
  </div>
</div>

<script>
function $(q){return document.querySelector(q);}
function get(k,d){const v=localStorage.getItem(k);return v===null?d:isNaN(v)?v:Number(v);}
function set(k,v){localStorage.setItem(k,String(v));}
const LS={YOU:'meai_you',HEARTS:'meai_hearts',NOTES:'meai_notes'};

function goRoom(mode){location.href=`room.html?mode=${mode}`;}
function setHello(){const nm=get(LS.YOU,'');$('#helloPill').textContent=nm?`👋 ${nm}さん、ようこそ！`:'👋 ようこそ';}
function startGame(){
  const v=$('#youName').value.trim();
  if(v){set(LS.YOU,v);}
  $('#cover').classList.add('hidden');
  setHello();
}
$('#startBtn').onclick=startGame;
document.addEventListener('DOMContentLoaded',()=>{
  if(get(LS.YOU,'')){ $('#cover').classList.add('hidden'); setHello(); }
  $('#hearts').textContent=get(LS.HEARTS,0);
  $('#notes').textContent=get(LS.NOTES,0);
});
</script>
</body>
</html>
